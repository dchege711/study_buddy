<!DOCTYPE html>
<html>

    <head>
        <title>Study Buddy Reset Password</title>
        <% include ../partials/header.ejs %>
        <script src="/static/AppUtilities.js"></script>
    </head>

    <body onload="processParams();">

        <% include ../partials/navbar.ejs %>

        <div id="main_div">

            <form class="w3-padding-large w3-center" style="margin: 5% 25% 25% 25%" id="form_password_request" method="POST">

                <label for="email"> Type the email address associated with your account: </label>
                <input class="w3-input" type="email" name="email" id="email_address" required/>

                <br />
                <br />

                <button class="w3-button w3-center w3-green" type="submit" onclick="passwordResetRequest();">
                    Request Password Reset
                </button>

            </form>

        </div>


        <% include ../partials/footer.ejs %>

        <script type="text/javascript">
            /**
             * @description Request a password reset.
             */
            function passwordResetRequest() {
                sendForm("form_password_request", '/reset-password', (results) => {
                    if (results.success) {
                        document.getElementById(formID).innerHTML = `
                            <p>Please check your email for a password reset link.</p>

                            <br />
                            <br />
                            
                            <button class="w3-button w3-center w3-blue" 
                                onclick="window.location='/'">
                                ... go back to LogIn</button>`;
                    } else {
                        console.log(results.message);
                    }
                });
                return false;
            }
        </script>

    </body>

</html>