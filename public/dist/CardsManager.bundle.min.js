var CardsManager=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(e){if(n.c[n.s]===e){var t=maxPQ();t.initialize([["one",1],["five",5],["two",2],["three",3],["zero",0],["four",4]]),console.log("Expect to see 6 items in descending order");for(let e of t)console.log(e);console.log("Size should be 6: "+t.size()),t.insert(["ten",10]),t.insert(["twenty",20]),t.insert(["-ve one",-1]),console.log("Size should be 9: "+t.size()),console.log("Expect to see 9 items in descending order");for(let e of t)console.log(e)}e.exports=function(){var e={},t=[],n=0,r={},o=0;function i(e){for(var r=Array(e).fill([null,Number.NEGATIVE_INFINITY]),o=0;o<=n;o++)r[o]=t[o];t=r}function s(e){for(;2*e<=n;){var t=2*e;if(t<n&&u(t,t+1)&&t++,!u(e,t))break;a(e,t),e=t}}function u(e,n){return t[e][1]!==t[n][1]?t[e][1]<t[n][1]:r[t[e][0]]<r[t[n][0]]}function a(e,n){var r=t[e];t[e]=t[n],t[n]=r}return e.initialize=function(e){n=e.length,t=Array(n+1).fill([null,Number.NEGATIVE_INFINITY]);for(var i=0;i<n;i++)r[e[i][0]]=o,t[i+1]=e[i],o+=1;for(var u=Math.floor(n/2);u>=1;u--)s(u)},e.is_empty=function(){return 0===n},e.size=function(){return n},e.contains_key=function(e){return r.hasOwnProperty(e)},e.insert=function(e){n===t.length-1&&i(2*t.length),n+=1,!1===r.hasOwnProperty(e[0])&&(r[e[0]]=o,o+=1),t[n]=e,function(e){for(;e>1&&u(Math.floor(e/2),e);)a(e,Math.floor(e/2)),e=Math.floor(e/2)}(n)},e.del_max=function(){if(this.is_empty())return[null,Number.NEGATIVE_INFINITY];var e=t[1];return a(1,n),n-=1,s(1),t[n+1]=[null,Number.NEGATIVE_INFINITY],n>0&&n===Math.floor((t.length-1)/4)&&i(Math.floor(t.length/2)),delete r[e[0]],e},e.peek=function(){return 0===n?null:t[1]},e[Symbol.iterator]=function*(){let e=[];for(var n=0;n<t.length;n++)t[n][0]&&e.push(t[n]);for(;!this.isEmpty();)yield this.delMax();this.initialize(e)},e}}).call(this,n(0)(e))},function(e,t){t.sendForm=function(e,n){return new Promise(function(r,o){let i=document.forms[e];if(i.checkValidity()){let e=i.elements,s={};for(let t=0;t<e.length;t++)"checkbox"==e[t].type?s[e[t].name]=e[t].checked:s[e[t].name]=e[t].value;delete s[""],t.sendHTTPRequest("POST",n,s).then(e=>{r(e)}).catch(e=>{o(e)})}else i.reportValidity(),o("Please fill in the form with valid inputs.")})},t.sendHTTPRequest=function(e,t,n,r="application/json"){return new Promise(function(o,i){let s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==this.readyState){let e=this.status;e<300?o(this.response):e>=300&&e<400?(i(new Error(`Request was redirected to ${this.responseURL}.`)),window.location=this.responseURL):(i(new Error(`Request returned a response status (${e})`)),document.write(this.response))}},s.open(e,t,!0),s.setRequestHeader("Content-Type",r),s.send(JSON.stringify(n))})},t.processParams=function(){var e=new URL(document.location).searchParams;e.has("msg")&&alert(e.get("msg"))},t.getAccountInfo=function(){let e=localStorage.getItem("session_info");return null===e?e:JSON.parse(e)},t.updateAccountInfo=function(e){let n=t.getAccountInfo();null===n&&(n={}),Object.keys(e).forEach(t=>{n[t]=e[t]}),localStorage.setItem("session_info",JSON.stringify(n))},t.refreshMetadata=function(){let e=t.getAccountInfo();return null===e?Promise.resolve(null):new Promise(function(n,r){t.sendHTTPRequest("POST","/read-metadata",{userIDInApp:e.userIDInApp}).then(e=>{let t=JSON.parse(e).message;localStorage.setItem("metadata",JSON.stringify(t)),n(t[0])}).catch(e=>{r(e)})})}},,function(e,t,n){"use strict";var r=n(1),o=n(2).sendHTTPRequest;e.exports=function(e,t,n="/read-card"){var i={},s=r(),u=r();function a(e,t,n=!0){var r=e.del_max();return r[1]=-1*r[1],t.insert(r),r}function c(e){return new Promise(function(r,i){let s=JSON.parse(localStorage.getItem(e));s?r(s):o("POST",n,{userIDInApp:t,cardID:e}).then(t=>{t=JSON.parse(t),localStorage.setItem(e,JSON.stringify(t.message[0])),r(t.message[0])}).catch(e=>{i(e)})})}return i.empty_card={title:"",description:"",tags:"",createdById:null,urgency:0,metadataIndex:null},i.initializeFromTags=function(t){return new Promise(function(n,o){null===t&&(t=Object.keys(e)),u=r(),s=r();let i=new Set([]);t.forEach(function(t){for(let n in e[t])!1===i.has(n)&&(s.insert([n,e[t][n].urgency]),i.add(n))}),n()})},i.initializeFromMinicards=function(t,n=!1){return new Promise(function(o,i){u=r(),s=r();let a=new Set([]);if(t.forEach(e=>{a.add(e._id),s.insert([e._id,e.urgency])}),n){let n=new Set([]);t.forEach(e=>{e.tags.forEach(e=>{n.add(e)})}),n.forEach(function(t){for(let n in e[t])a.has(n)||(s.insert([n,e[t][n].urgency]),a.add(n))})}o()})},i.initializeFromTrash=function(e){return new Promise(function(t,n){u=r(),s=r();let o=Object.keys(e);for(let t=0;t<o.length;t++)s.insert([o[t],e[o[t]]]);t()})},i.next=function(){return new Promise(function(e,t){s.is_empty()?e(null):c(a(s,u)[0]).then(t=>{e(t)}).catch(e=>{t(e)})})},i.numNext=function(){return s.size()},i.numPrev=function(){return u.size()},i.previous=function(){return new Promise(function(e,t){u.is_empty()?e(null):c(a(u,s)[0]).then(t=>{e(t)}).catch(e=>{t(e)})})},i.removeCard=function(e){let t=u.peek();return t&&t[0]==e?u.del_max()[0]:(t=s.peek())&&t[0]==e?s.del_max()[0]:null},i.insertCard=function(e,t){u.insert([e,t])},i.update_card=function(e){localStorage.removeItem(e._id),localStorage.setItem(e._id,JSON.stringify(e)),this.removeCard(e._id),u.insert([e._id,-1*e.urgency])},i.saveCard=function(e,t){return new Promise(function(n,r){o("POST",t,e).then(e=>{(e=JSON.parse(e)).success?(i.update_card(e.message),n(e.message)):r(e.message)}).catch(e=>{r(e)})})},i}}]);